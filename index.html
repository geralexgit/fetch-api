<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Fetch Api sandbox</title>
</head>
<body>

	<button id="getText">Get text</button>
	<button id="getUsers">Get JSON</button>
	<button id="getPosts">Get API DATA</button>
	<hr>
	<div id="outputText"></div>
	<div id="outputJson"></div>
	<div id="outputPosts"></div>
	<hr>
	<form id="addPost">
		<div>
			<input type="text" id="title" placeholder="title">			
		</div>		
		<div>
			<textarea type="text" id="body" placeholder="body"></textarea>		
		</div>		
		<div>
			<input type="submit" value="submit">			
		</div>
	</form>

	<script>

		document.getElementById('getText').addEventListener('click', getText);
		document.getElementById('getUsers').addEventListener('click', getUsers);
		document.getElementById('getPosts').addEventListener('click', getPosts);
		document.getElementById('addPost').addEventListener('submit', addPost);

		function getText() {
			fetch('sample.txt')				
				.then(res => {return res.text()})
				.then(data => {		
					let output = '<h2>Text</h2>';	
					output += `<p>${data}</p>`;		
					document.getElementById('outputText').innerHTML = output;
				})
				.catch(err => console.log(err));
		}

		function getUsers() {
			fetch('https://jsonplaceholder.typicode.com/users')
				.then(res => {return res.json()})
				.then(data => {
					let output = '<h2>Users</h2>';
					data.forEach(user => {
						output += `<ul>
							<li>Name: ${user.name}</li>
							<li>Username: ${user.username}</li>
							<li>Email: ${user.email}</li>
						</ul>`;
					})
					document.getElementById('outputJson').innerHTML = output;
					//console.log(data);
				})
				.catch(err => console.log(err));
		}

		function getPosts() {
			fetch('https://jsonplaceholder.typicode.com/posts')
				.then(res => {return res.json()})
				.then(data => {
					console.log(data);
					let output = '<h2>Posts</h2>';
					data.forEach(post => {
						output += 
						`<div>
							<h3>${post.title}</h3>
							<p>${post.body}</p>
						</div>`;
					})
					document.getElementById('outputPosts').innerHTML = output;
					//console.log(data);
				})
				.catch(err => console.log(err));
		}

		function addPost(e) {
			e.preventDefault();
			const title = document.getElementById('title').value;
			const body = document.getElementById('body').value;
			fetch('https://jsonplaceholder.typicode.com/posts', {
				method: 'POST',
				headers: {
					'Accept': 'application/json, text/plain, */*',
					'Content-type': 'application/json'
				},
				body: JSON.stringify({title, body})
			})
				.then(res => res.json())
				.then(data => console.log(data))
				.catch(err => console.log(err));
		}
 
	</script>
</body>
</html>